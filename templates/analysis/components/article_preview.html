<!-- Live Article Preview -->
<div class="card mb-4">
    <div class="card-header">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <div>
                <h6 class="mb-0" style="color: var(--text-primary);">ðŸ“„ Article Preview</h6>
                <small style="color: var(--text-muted);">10 articles per page</small>
            </div>
            <button class="btn btn-sm btn-outline-primary"
                    @click="articlesState.page = 1">
                ðŸ”„ Refresh
            </button>
        </div>
        <div class="btn-group btn-group-sm w-100" role="group">
            <button class="btn btn-outline-light"
                    @click="articlesState.page = Math.max(1, articlesState.page - 1)"
                    :disabled="articlesState.page <= 1"
                    style="flex: 0 0 auto;">â—€ Prev</button>
            <button class="btn btn-outline-secondary" disabled style="flex: 1;">
                <span x-text="'Page ' + articlesState.page + ' of ' + totalFilteredPages"></span>
                <small x-show="filteredArticles.length > 0" class="ms-1" x-text="'(' + filteredArticles.length + ' total)'"></small>
            </button>
            <button class="btn btn-outline-light"
                    @click="articlesState.page++"
                    :disabled="articlesState.page >= totalFilteredPages"
                    style="flex: 0 0 auto;">Next â–¶</button>
        </div>
    </div>
    <div class="card-body p-3">
        <div id="article-preview">
            <div x-show="paginatedArticles.length === 0" class="alert alert-info">
                <i class="bi bi-info-circle me-2"></i>
                No articles to display. Create a selection first.
            </div>

            <template x-for="(article, index) in paginatedArticles" :key="article.id">
                <div class="article-item">
                    <div class="article-number" x-text="(articlesState.page - 1) * articlesState.pageSize + index + 1"></div>
                    <div class="article-content">
                        <div class="article-title-row">
                            <h6 class="article-title" x-text="article.title && article.title.length > 120 ? article.title.substring(0, 120) + '...' : (article.title || 'Untitled')"></h6>
                        </div>
                        <div class="article-meta-row">
                            <span class="article-feed" x-text="article.feed_title || 'Unknown Feed'"></span>
                            <span class="article-date" x-text="article.published ? new Date(article.published).toLocaleString('de-DE', {day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit'}) : 'No date'"></span>
                        </div>
                        <div x-show="article.description" class="article-description" x-text="article.description && article.description.length > 180 ? article.description.substring(0, 180) + '...' : article.description"></div>
                        <div class="article-footer-row">
                            <span x-show="article.has_analysis && article.sentiment_label" class="badge" :class="{
                                'bg-success': article.sentiment_label && article.sentiment_label.toLowerCase() === 'positive',
                                'bg-danger': article.sentiment_label && article.sentiment_label.toLowerCase() === 'negative',
                                'bg-secondary': article.sentiment_label && article.sentiment_label.toLowerCase() !== 'positive' && article.sentiment_label.toLowerCase() !== 'negative'
                            }">
                                <small x-text="'âœ“ Analyzed: ' + (article.sentiment_label || 'Unknown')"></small>
                            </span>
                            <span x-show="!article.has_analysis" class="badge" style="background: #f59e0b;">
                                <small>â—‹ Not Analyzed</small>
                            </span>
                            <div class="article-actions">
                                <a x-show="article.link" :href="article.link" target="_blank" class="btn-link">Read Article â†’</a>
                                <span class="article-id" x-text="'#' + article.id"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </template>

            <div x-show="paginatedArticles.length > 0" class="articles-footer">
                <div class="pagination-info">
                    <span x-text="'Showing ' + ((articlesState.page - 1) * articlesState.pageSize + 1) + '-' + Math.min(articlesState.page * articlesState.pageSize, filteredArticles.length) + ' of ' + filteredArticles.length + ' articles'"></span>
                    <span class="separator">â€¢</span>
                    <span x-text="'Page ' + articlesState.page + ' of ' + totalFilteredPages"></span>
                </div>
            </div>
        </div>
    </div>
</div>
